var m=Object.defineProperty,l=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?m(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,i=(r,e)=>{for(var t in e||(e={}))g.call(e,t)&&w(r,t,e[t]);if(p)for(var t of p(e))k.call(e,t)&&w(r,t,e[t]);return r},u=(r,e)=>l(r,d(e));import{e as S,f as j,s as T}from"./entry-025e378f.mjs";import{h as q,j as $,u as A}from"./json-8fff1e89.mjs";import{w as C}from"./utils-d61eb5de.mjs";const s=r=>Array.isArray(r)?r:r?[r]:[],x=["sort","where","only","without"],f=(r,e)=>{const t=i({},e);for(const n of x)t[n]&&(t[n]=s(t[n]));const o=(n,h)=>(...c)=>(t[n]=h(...c),a),a={params:()=>Object.freeze(t),only:o("only",s),without:o("without",s),where:o("where",n=>[...s(t.where),n]),sort:o("sort",n=>[...s(t.sort),...s(n)]),limit:o("limit",n=>parseInt(String(n),10)),skip:o("skip",n=>parseInt(String(n),10)),findOne:()=>r(u(i({},t),{first:!0})),find:()=>r(t),findSurround:(n,h)=>r(u(i({},t),{surround:i({query:n},h)})),locale:n=>a.where({_locale:n})};return a},y=r=>{const e=C(`/query/${q(r)}`);return $fetch(e,{method:"GET",responseType:"json",params:{_params:$(r),previewToken:A("previewToken").value}})};function P(r,...e){if(typeof r=="string"){const t=S(j(T(r,...e)));return f(y).where({_path:new RegExp(`^${t}`)})}return f(y,r)}export{P as q};
